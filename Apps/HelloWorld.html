<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Use correct character set. -->
    <meta charset="utf-8" />
    <!-- Tell IE to use the latest, best version. -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <title>Hello World!</title>
    <script src="../Build/CesiumUnminified/Cesium.js"></script>
    <style>
      @import url(../Build/CesiumUnminified/Widgets/widgets.css);
      html,
      body,
      #cesiumContainer {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div id="cesiumContainer"></div>
    <script>
      const json =
        '{"camera":{"name":"DynamicCamera","firstPosition":{"x":5199657.2551685963,"y":3756439.7163555156,"z":260905.46684794693},"firstRotation":{"x":75.08837890625,"y":254.19943237304688,"z":179.96170043945313}},"directionalLight":{"name":"Directional Light","direction":{"x":45.512321472167969,"y":329.17010498046875,"z":358.50088500976563},"colorRGBA":{"r":1.0,"g":0.94117647409439087,"b":0.78431373834609985,"a":1.0},"intensity":2.2},"tilesets":[{"name":"Cesium World Terrain","tilesetSourceKind":"FromCesiumIon","url":"","ionAssetId":1,"rasterOverlays":[{"ionAssetId":3},{"ionAssetId":2107904}],"clipping":{"name":"Clipping","globeAncor":{"position":{"x":5440217.7643018421,"y":3309980.0012347731,"z":-378398.82843382133},"orientation":{"x":0.87132769823074341,"y":-0.48979157209396362,"z":-0.014637780375778675,"w":0.026039017364382744},"scale":{"x":1.0000047683836073,"y":1.0000000000005183,"z":1.0000000000005187}},"clippingPlaneCollections":[{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.910433292388916,"y":0.0,"z":0.4136558473110199},"distance":-115834.75},{"normal":{"x":-0.28150114417076111,"y":0.0,"z":0.95956093072891235},"distance":-536682.8},{"normal":{"x":-0.42849305272102356,"y":0.0,"z":-0.90354514122009277},"distance":426407.8}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.95692610740661621,"y":0.0,"z":0.29033151268959045},"distance":-43764.43},{"normal":{"x":0.80095809698104858,"y":0.0,"z":0.598720371723175},"distance":-224994.953},{"normal":{"x":0.44151619076728821,"y":0.0,"z":0.89725327491760254},"distance":-425787.6},{"normal":{"x":0.13651001453399658,"y":0.0,"z":0.99063873291015625},"distance":-511967.344},{"normal":{"x":-0.69245094060897827,"y":0.0,"z":-0.721464991569519},"distance":300605.125}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.99726778268814087,"y":0.0,"z":-0.0738716870546341},"distance":160918.984},{"normal":{"x":0.917598307132721,"y":0.0,"z":0.3975088894367218},"distance":-101067.438},{"normal":{"x":0.62400567531585693,"y":0.0,"z":0.78141981363296509},"distance":-345375.6},{"normal":{"x":0.24263569712638855,"y":0.0,"z":0.97011750936508179},"distance":-495641.625},{"normal":{"x":-0.81113630533218384,"y":0.0,"z":-0.584857165813446},"distance":213252.031}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.77146995067596436,"y":0.0,"z":0.63626581430435181},"distance":-246276.188},{"normal":{"x":0.13290025293827057,"y":0.0,"z":0.991129457950592},"distance":-523699.938},{"normal":{"x":-0.68853849172592163,"y":0.0,"z":-0.72519969940185547},"distance":303074.6},{"normal":{"x":0.81113630533218384,"y":0.0,"z":0.584857165813446},"distance":-213252.031}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.82815724611282349,"y":0.0,"z":0.56049579381942749},"distance":-194138.828},{"normal":{"x":0.45137882232666016,"y":0.0,"z":0.89233243465423584},"distance":-428262.3},{"normal":{"x":-0.682285726070404,"y":0.0,"z":-0.73108559846878052},"distance":307138.719}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.91513729095458984,"y":0.0,"z":-0.4031423032283783},"distance":351288.9},{"normal":{"x":0.81319808959960938,"y":0.0,"z":0.58198702335357666},"distance":-207975.9},{"normal":{"x":0.38233464956283569,"y":0.0,"z":0.92402386665344238},"distance":-460146.5},{"normal":{"x":0.17364369332790375,"y":0.0,"z":0.98480856418609619},"distance":-524594.4},{"normal":{"x":-0.66028672456741333,"y":0.0,"z":-0.75101357698440552},"distance":321407.2}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.589882493019104,"y":0.0,"z":0.80748909711837769},"distance":-363464.219},{"normal":{"x":0.18955749273300171,"y":0.0,"z":0.981869637966156},"distance":-521580.438},{"normal":{"x":-0.52263534069061279,"y":0.0,"z":0.85255634784698486},"distance":-558614.1},{"normal":{"x":-0.073396354913711548,"y":0.0,"z":-0.9973028302192688},"distance":546514.1}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.68637937307357788,"y":0.0,"z":0.72724366188049316},"distance":-298863.219},{"normal":{"x":0.099197253584861755,"y":0.0,"z":0.9950677752494812},"distance":-543509.25},{"normal":{"x":-0.46950918436050415,"y":0.0,"z":0.882927656173706},"distance":-574811.6},{"normal":{"x":-0.1133902370929718,"y":0.0,"z":-0.99355047941207886},"distance":538351.7}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.0029111492913216352,"y":0.0,"z":0.999995768070221},"distance":-560644.063},{"normal":{"x":-0.99994653463363647,"y":0.0,"z":-0.010340820997953415},"distance":-172032.25},{"normal":{"x":0.062162138521671295,"y":0.0,"z":-0.99806606769561768},"distance":568111.6},{"normal":{"x":0.22399656474590302,"y":0.0,"z":0.97458994388580322},"distance":-510287.063},{"normal":{"x":0.1133902370929718,"y":0.0,"z":0.99355047941207886},"distance":-538351.7}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.8479657769203186,"y":0.0,"z":0.53005099296569824},"distance":-446621.1},{"normal":{"x":-0.98672628402709961,"y":0.0,"z":0.162392258644104},"distance":-266922.2},{"normal":{"x":-0.87327486276626587,"y":0.0,"z":-0.4872279167175293},"distance":113561.508},{"normal":{"x":0.19351492822170258,"y":0.0,"z":-0.98109734058380127},"distance":577223.5},{"normal":{"x":0.073396354913711548,"y":0.0,"z":0.9973028302192688},"distance":-546514.1},{"normal":{"x":-0.062162138521671295,"y":0.0,"z":0.99806606769561768},"distance":-568111.6}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.99697726964950562,"y":0.0,"z":0.077693283557891846},"distance":-220998.9},{"normal":{"x":-0.7606971263885498,"y":0.0,"z":-0.64910697937011719},"distance":221566.75},{"normal":{"x":0.47995784878730774,"y":0.0,"z":-0.87729156017303467},"distance":568082.6},{"normal":{"x":0.6564212441444397,"y":0.0,"z":0.75439459085464478},"distance":-300060.219}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.99994528293609619,"y":0.0,"z":-0.010463591665029526},"distance":-169153.516},{"normal":{"x":-0.47321635484695435,"y":0.0,"z":-0.88094627857208252},"distance":400619.938},{"normal":{"x":0.58238083124160767,"y":0.0,"z":0.812916100025177},"distance":-345491.344}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.76014840602874756,"y":0.0,"z":-0.64974957704544067},"distance":227224.1},{"normal":{"x":-0.6516883373260498,"y":0.0,"z":-0.75848686695098877},"distance":302992.375},{"normal":{"x":0.72282379865646362,"y":0.0,"z":0.69103240966796875},"distance":-255876.438}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.90726572275161743,"y":0.0,"z":-0.42055791616439819},"distance":84315.02},{"normal":{"x":-0.56030642986297607,"y":0.0,"z":-0.82828539609909058},"distance":349787.625},{"normal":{"x":0.83473664522171021,"y":0.0,"z":0.55064928531646729},"distance":-164242.734}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.999426007270813,"y":0.0,"z":0.03387884795665741},"distance":-165363.047},{"normal":{"x":-0.72214442491531372,"y":0.0,"z":-0.69174230098724365},"distance":253297.438},{"normal":{"x":0.46999317407608032,"y":0.0,"z":-0.88267010450363159},"distance":525088.8},{"normal":{"x":0.56271737813949585,"y":0.0,"z":0.82664936780929565},"distance":-348576.969}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.9943888783454895,"y":0.0,"z":-0.10578605532646179},"distance":-85503.68},{"normal":{"x":-0.27655503153800964,"y":0.0,"z":-0.96099811792373657},"distance":456955.063},{"normal":{"x":0.69468718767166138,"y":0.0,"z":0.71931189298629761},"distance":-274236.031}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.966322124004364,"y":0.0,"z":0.25733548402786255},"distance":-266994.875},{"normal":{"x":-0.51119476556777954,"y":0.0,"z":-0.85946488380432129},"distance":369841.25},{"normal":{"x":0.82621634006500244,"y":0.0,"z":0.56335300207138062},"distance":-175553.141}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.66636848449707031,"y":0.0,"z":-0.74562263488769531},"distance":290508.563},{"normal":{"x":-0.6640770435333252,"y":0.0,"z":-0.74766409397125244},"distance":291844.4},{"normal":{"x":-0.51918107271194458,"y":0.0,"z":-0.85466432571411133},"distance":364389.781},{"normal":{"x":0.049120750278234482,"y":0.0,"z":-0.998792827129364},"distance":507968.7},{"normal":{"x":0.63939839601516724,"y":0.0,"z":0.7688755989074707},"distance":-307472.625},{"normal":{"x":-0.82621634006500244,"y":0.0,"z":-0.56335300207138062},"distance":175553.141}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.94895255565643311,"y":0.0,"z":-0.31541889905929565},"distance":41407.02},{"normal":{"x":-0.71413379907608032,"y":0.0,"z":-0.70000916719436646},"distance":263155.781},{"normal":{"x":-0.68124908208847046,"y":0.0,"z":-0.7320516705513},"distance":283021.8},{"normal":{"x":-0.630407452583313,"y":0.0,"z":-0.77626436948776245},"distance":310049.438},{"normal":{"x":0.67131727933883667,"y":0.0,"z":0.74117004871368408},"distance":-289611.6}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.80886590480804443,"y":0.0,"z":-0.58799320459365845},"distance":205567.719},{"normal":{"x":-0.6405065655708313,"y":0.0,"z":-0.76795268058776855},"distance":303895.0},{"normal":{"x":-0.59704798460006714,"y":0.0,"z":-0.802205502986908},"distance":323336.563},{"normal":{"x":-0.36354047060012817,"y":0.0,"z":-0.93157839775085449},"distance":401246.438},{"normal":{"x":0.63334912061691284,"y":0.0,"z":0.77386623620986938},"distance":-308245.531}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.70616203546524048,"y":0.0,"z":-0.70805031061172485},"distance":272444.781},{"normal":{"x":-0.627683162689209,"y":0.0,"z":-0.778468906879425},"distance":308813.0},{"normal":{"x":0.13180007040500641,"y":0.0,"z":-0.9912763237953186},"distance":441650.656},{"normal":{"x":0.96021956205368042,"y":0.0,"z":-0.27924612164497375},"distance":169618.734},{"normal":{"x":0.56384015083312988,"y":0.0,"z":0.82588392496109009},"distance":-337445.7}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.43911805748939514,"y":0.0,"z":-0.89842939376831055},"distance":384766.656},{"normal":{"x":0.32508775591850281,"y":0.0,"z":-0.94568383693695068},"distance":432594.281},{"normal":{"x":0.7160915732383728,"y":0.0,"z":-0.69800639152526855},"distance":334611.281},{"normal":{"x":0.87546008825302124,"y":0.0,"z":0.483290433883667},"distance":-193821.391},{"normal":{"x":-0.36512622237205505,"y":0.0,"z":0.93095803260803223},"distance":-431818.219}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.63393121957778931,"y":0.0,"z":-0.77338939905166626},"distance":368152.3},{"normal":{"x":0.89618080854415894,"y":0.0,"z":-0.44368907809257507},"distance":224771.7},{"normal":{"x":0.7325405478477478,"y":0.0,"z":0.68072330951690674},"distance":-296629.281},{"normal":{"x":-0.64219647645950317,"y":0.0,"z":0.7665400505065918},"distance":-370472.938},{"normal":{"x":0.32481124997138977,"y":0.0,"z":-0.94577890634536743},"distance":436829.969},{"normal":{"x":0.36512622237205505,"y":0.0,"z":-0.93095803260803223},"distance":431818.219}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.81937879323959351,"y":0.0,"z":0.57325232028961182},"distance":-244767.453},{"normal":{"x":0.15946993231773376,"y":0.0,"z":0.98720276355743408},"distance":-454149.969},{"normal":{"x":-0.75369018316268921,"y":0.0,"z":0.65722990036010742},"distance":-326446.781},{"normal":{"x":0.64219647645950317,"y":0.0,"z":-0.7665400505065918},"distance":370472.938}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.97930574417114258,"y":0.0,"z":0.20238675177097321},"distance":-64252.89},{"normal":{"x":0.26243522763252258,"y":0.0,"z":0.96494954824447632},"distance":-446129.469},{"normal":{"x":0.18530230224132538,"y":0.0,"z":0.98268157243728638},"distance":-457032.656},{"normal":{"x":-0.61819052696228027,"y":0.0,"z":-0.78602832555770874},"distance":349134.8}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.96855133771896362,"y":0.0,"z":0.24881358444690704},"distance":-83486.48},{"normal":{"x":0.80094718933105469,"y":0.0,"z":0.598734974861145},"distance":-255262.172},{"normal":{"x":0.42503055930137634,"y":0.0,"z":0.90517902374267578},"distance":-415098.719},{"normal":{"x":-0.44451576471328735,"y":0.0,"z":0.89577102661132813},"distance":-445020.969},{"normal":{"x":-0.37750732898712158,"y":0.0,"z":-0.926006555557251},"distance":423577.8}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.63953524827957153,"y":0.0,"z":0.76876181364059448},"distance":-337442.625},{"normal":{"x":-0.32057347893714905,"y":0.0,"z":0.94722366333007813},"distance":-467064.7},{"normal":{"x":-0.18756489455699921,"y":0.0,"z":-0.98225224018096924},"distance":458579.5}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.91742008924484253,"y":0.0,"z":0.39792004227638245},"distance":-144095.375},{"normal":{"x":0.64959394931793213,"y":0.0,"z":0.76028132438659668},"distance":-331154.8},{"normal":{"x":0.60424262285232544,"y":0.0,"z":0.79680037498474121},"distance":-351032.281},{"normal":{"x":-0.73299133777618408,"y":0.0,"z":-0.68023800849914551},"distance":287705.7}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.99476474523544312,"y":0.0,"z":-0.10219182819128036},"distance":104912.258},{"normal":{"x":0.93378424644470215,"y":0.0,"z":0.35783651471138},"distance":-122221.914},{"normal":{"x":0.46842435002326965,"y":0.0,"z":0.88350367546081543},"distance":-405392.281},{"normal":{"x":-0.904981255531311,"y":0.0,"z":-0.42545151710510254},"distance":155568.547}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.999213695526123,"y":0.0,"z":0.039648909121751785},"distance":38891.3828},{"normal":{"x":0.95299100875854492,"y":0.0,"z":0.30299836397171021},"distance":-93468.16},{"normal":{"x":0.80101996660232544,"y":0.0,"z":0.59863764047622681},"distance":-249252.047},{"normal":{"x":-0.92802220582962036,"y":0.0,"z":-0.37252479791641235},"distance":128301.172}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.986635148525238,"y":0.0,"z":0.16294488310813904},"distance":-19882.1621},{"normal":{"x":0.60608106851577759,"y":0.0,"z":0.79540294408798218},"distance":-361928.063},{"normal":{"x":-0.88721400499343872,"y":0.0,"z":-0.46135812997817993},"distance":175252.266}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.992586076259613,"y":0.0,"z":-0.12154373526573181},"distance":135663.5},{"normal":{"x":0.48226144909858704,"y":0.0,"z":0.87602734565734863},"distance":-424511.719},{"normal":{"x":-0.82556915283203125,"y":0.0,"z":-0.56430095434188843},"distance":234189.063}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.69118964672088623,"y":0.0,"z":0.72267341613769531},"distance":-327829.4},{"normal":{"x":0.608070433139801,"y":0.0,"z":0.79388308525085449},"distance":-371934.344},{"normal":{"x":0.31289300322532654,"y":0.0,"z":0.94978833198547363},"distance":-477888.0},{"normal":{"x":-0.5651165246963501,"y":0.0,"z":-0.825011134147644},"distance":391330.4}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.6740756630897522,"y":0.0,"z":0.73866230249404907},"distance":-336189.844},{"normal":{"x":-0.27567261457443237,"y":0.0,"z":0.96125155687332153},"distance":-536695.8},{"normal":{"x":-0.23831190168857574,"y":0.0,"z":-0.97118860483169556},"distance":496373.9}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.04644954577088356,"y":0.0,"z":0.99892061948776245},"distance":-528179.8},{"normal":{"x":0.024710571393370628,"y":0.0,"z":0.99969464540481567},"distance":-530579.563},{"normal":{"x":-0.98032593727111816,"y":0.0,"z":-0.19738557934761047},"distance":12957.8936},{"normal":{"x":-0.27061668038368225,"y":0.0,"z":-0.96268725395202637},"distance":486282.469},{"normal":{"x":0.5651165246963501,"y":0.0,"z":0.825011134147644},"distance":-391330.4},{"normal":{"x":0.54278266429901123,"y":0.0,"z":0.839873194694519},"distance":-401015.375},{"normal":{"x":0.23831190168857574,"y":0.0,"z":0.97118860483169556},"distance":-496373.9}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.86072301864624023,"y":0.0,"z":0.50907355546951294},"distance":-189212.859},{"normal":{"x":-0.27228716015815735,"y":0.0,"z":0.96221601963043213},"distance":-539753.563},{"normal":{"x":-0.44471395015716553,"y":0.0,"z":-0.89567267894744873},"distance":433949.625}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.019833415746688843,"y":0.0,"z":0.99980330467224121},"distance":-531143.7},{"normal":{"x":-0.2836487889289856,"y":0.0,"z":0.95892822742462158},"distance":-539594.563},{"normal":{"x":-0.1190921887755394,"y":0.0,"z":-0.99288320541381836},"distance":516367.1},{"normal":{"x":0.44471395015716553,"y":0.0,"z":0.89567267894744873},"distance":-433949.625}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.02447889931499958,"y":0.0,"z":0.99970036745071411},"distance":-534720.6},{"normal":{"x":-0.60515701770782471,"y":0.0,"z":0.79610615968704224},"distance":-487711.281},{"normal":{"x":-0.99837708473205566,"y":0.0,"z":0.056949149817228317},"distance":-138046.547},{"normal":{"x":0.45516055822372437,"y":0.0,"z":-0.89040935039520264},"distance":516159.438},{"normal":{"x":0.1190921887755394,"y":0.0,"z":0.99288320541381836},"distance":-516367.1}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.69245094060897827,"y":0.0,"z":0.721464991569519},"distance":-300605.125},{"normal":{"x":0.68853849172592163,"y":0.0,"z":0.72519969940185547},"distance":-303074.6},{"normal":{"x":0.682285726070404,"y":0.0,"z":0.73108559846878052},"distance":-307138.719},{"normal":{"x":-0.68868738412857056,"y":0.0,"z":-0.72505843639373779},"distance":302923.3}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.77358174324035645,"y":0.0,"z":0.63369655609130859},"distance":-240724.688},{"normal":{"x":0.66028672456741333,"y":0.0,"z":0.75101357698440552},"distance":-321407.2},{"normal":{"x":-0.19351492822170258,"y":0.0,"z":0.98109734058380127},"distance":-577223.5},{"normal":{"x":-0.6564212441444397,"y":0.0,"z":-0.75439459085464478},"distance":300060.219},{"normal":{"x":-0.51277685165405273,"y":0.0,"z":-0.85852193832397461},"distance":382764.281},{"normal":{"x":0.011975097469985485,"y":0.0,"z":-0.99992823600769043},"distance":552373.0}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.83473664522171021,"y":0.0,"z":-0.55064928531646729},"distance":164242.734},{"normal":{"x":-0.56271737813949585,"y":0.0,"z":-0.82664936780929565},"distance":348576.969},{"normal":{"x":0.73584580421447754,"y":0.0,"z":0.67714911699295044},"distance":-246288.344}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.69468718767166138,"y":0.0,"z":-0.71931189298629761},"distance":274236.031},{"normal":{"x":-0.63939839601516724,"y":0.0,"z":-0.7688755989074707},"distance":307472.625},{"normal":{"x":0.646289587020874,"y":0.0,"z":0.7630922794342041},"distance":-303716.1}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.67643207311630249,"y":0.0,"z":-0.73650497198104858},"distance":286924.719},{"normal":{"x":-0.63334912061691284,"y":0.0,"z":-0.77386623620986938},"distance":308245.531},{"normal":{"x":-0.56384015083312988,"y":0.0,"z":-0.82588392496109009},"distance":337445.7},{"normal":{"x":0.74491846561431885,"y":0.0,"z":-0.66715544462203979},"distance":330503.031},{"normal":{"x":0.75369018316268921,"y":0.0,"z":-0.65722990036010742},"distance":326446.781},{"normal":{"x":0.51449459791183472,"y":0.0,"z":0.85749357938766479},"distance":-383942.531},{"normal":{"x":0.13505508005619049,"y":0.0,"z":0.99083811044692993},"distance":-457694.6}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.96803975105285645,"y":0.0,"z":0.250796914100647},"distance":-87298.1641},{"normal":{"x":0.61819052696228027,"y":0.0,"z":0.78602832555770874},"distance":-349134.8},{"normal":{"x":0.37750732898712158,"y":0.0,"z":0.926006555557251},"distance":-423577.8},{"normal":{"x":0.18756489455699921,"y":0.0,"z":0.98225224018096924},"distance":-458579.5},{"normal":{"x":-0.041587784886360168,"y":0.0,"z":0.99913489818573},"distance":-477972.0},{"normal":{"x":-0.13505508005619049,"y":0.0,"z":-0.99083811044692993},"distance":457694.6}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.95294564962387085,"y":0.0,"z":0.30314114689826965},"distance":-93674.77},{"normal":{"x":0.904981255531311,"y":0.0,"z":0.42545151710510254},"distance":-155568.547},{"normal":{"x":-0.91769111156463623,"y":0.0,"z":-0.39729470014572144},"distance":141036.016}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.92802220582962036,"y":0.0,"z":0.37252479791641235},"distance":-128301.172},{"normal":{"x":0.88721400499343872,"y":0.0,"z":0.46135812997817993},"distance":-175252.266},{"normal":{"x":-0.91600221395492554,"y":0.0,"z":-0.40117323398590088},"distance":143034.234}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.91930001974105835,"y":0.0,"z":0.3935573399066925},"distance":-138315.516},{"normal":{"x":0.82556915283203125,"y":0.0,"z":0.56430095434188843},"distance":-234189.063},{"normal":{"x":0.27061668038368225,"y":0.0,"z":0.96268725395202637},"distance":-486282.469},{"normal":{"x":-0.14547300338745117,"y":0.0,"z":0.98936223983764648},"distance":-539488.2},{"normal":{"x":-0.45516055822372437,"y":0.0,"z":0.89040935039520264},"distance":-516159.438},{"normal":{"x":-0.28947988152503967,"y":0.0,"z":-0.9571840763092041},"distance":470476.563}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.68868738412857056,"y":0.0,"z":0.72505843639373779},"distance":-302923.344},{"normal":{"x":-0.011975097469985485,"y":0.0,"z":0.99992823600769043},"distance":-552373.0},{"normal":{"x":-0.58238083124160767,"y":0.0,"z":-0.812916100025177},"distance":345491.344},{"normal":{"x":-0.32658478617668152,"y":0.0,"z":-0.94516795873641968},"distance":459897.4}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.7525753378868103,"y":0.0,"z":-0.65850615501403809},"distance":233868.219},{"normal":{"x":-0.73584580421447754,"y":0.0,"z":-0.67714911699295044},"distance":246288.344},{"normal":{"x":-0.62958014011383057,"y":0.0,"z":-0.7769356369972229},"distance":313236.0},{"normal":{"x":0.73029136657714844,"y":0.0,"z":0.68313586711883545},"distance":-250495.188}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.67131727933883667,"y":0.0,"z":-0.74117004871368408},"distance":289611.6},{"normal":{"x":0.041587784886360168,"y":0.0,"z":-0.99913489818573},"distance":477972.0},{"normal":{"x":0.73299133777618408,"y":0.0,"z":0.68023800849914551},"distance":-287705.7},{"normal":{"x":0.2830582857131958,"y":0.0,"z":0.95910269021987915},"distance":-447034.781}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.91769111156463623,"y":0.0,"z":0.39729470014572144},"distance":-141036.016},{"normal":{"x":0.91600221395492554,"y":0.0,"z":0.40117323398590088},"distance":-143034.234},{"normal":{"x":0.88780057430267334,"y":0.0,"z":0.46022850275039673},"distance":-174644.578},{"normal":{"x":0.28947988152503967,"y":0.0,"z":0.9571840763092041},"distance":-470476.563},{"normal":{"x":0.12117605656385422,"y":0.0,"z":0.99263101816177368},"distance":-507299.344},{"normal":{"x":-0.23346230387687683,"y":0.0,"z":0.9723658561706543},"distance":-536080.9},{"normal":{"x":-0.646289587020874,"y":0.0,"z":-0.7630922794342041},"distance":303716.1},{"normal":{"x":-0.2830582857131958,"y":0.0,"z":-0.95910269021987915},"distance":447034.781}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":0.42849305272102356,"y":0.0,"z":0.90354514122009277},"distance":-426407.8},{"normal":{"x":0.32658478617668152,"y":0.0,"z":0.94516795873641968},"distance":-459897.4},{"normal":{"x":-0.72282379865646362,"y":0.0,"z":-0.69103240966796875},"distance":255876.438},{"normal":{"x":-0.19737088680267334,"y":0.0,"z":-0.98032891750335693},"distance":492377.219}]},{"name":"ClippingPolygon","clippingPlanes":[{"normal":{"x":-0.73029136657714844,"y":0.0,"z":-0.68313586711883545},"distance":250495.188},{"normal":{"x":0.23346230387687683,"y":0.0,"z":-0.9723658561706543},"distance":536080.9},{"normal":{"x":0.19737088680267334,"y":0.0,"z":0.98032891750335693},"distance":-492377.219}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":-0.29115960001945496,"y":0.0,"z":-0.95667445659637451},"distance":-555435.3},{"normal":{"x":0.5513496994972229,"y":0.0,"z":-0.8342742919921875},"distance":-515836.531},{"normal":{"x":0.85480588674545288,"y":0.0,"z":-0.51894789934158325},"distance":-342667.9},{"normal":{"x":-0.37601694464683533,"y":0.0,"z":0.92661279439926147},"distance":562332.2}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.010484992526471615,"y":0.0,"z":-0.99994504451751709},"distance":-588786.75},{"normal":{"x":0.72536748647689819,"y":0.0,"z":-0.68836182355880737},"distance":-437992.875},{"normal":{"x":0.78305572271347046,"y":0.0,"z":-0.62195152044296265},"distance":-402257.844},{"normal":{"x":-0.72035503387451172,"y":0.0,"z":0.69360542297363281},"distance":440029.531}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.12099984288215637,"y":0.0,"z":-0.99265247583389282},"distance":-577127.8},{"normal":{"x":0.68797779083251953,"y":0.0,"z":-0.72573173046112061},"distance":-458734.156},{"normal":{"x":0.92348486185073853,"y":0.0,"z":-0.38363483548164368},"distance":-277920.625},{"normal":{"x":-0.72070300579071045,"y":0.0,"z":0.69324386119842529},"distance":440565.375}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.54956978559494019,"y":0.0,"z":-0.83544772863388062},"distance":-509790.438},{"normal":{"x":0.8945845365524292,"y":0.0,"z":-0.4468986988067627},"distance":-317268.625},{"normal":{"x":0.917475700378418,"y":0.0,"z":0.39779183268547058},"distance":154194.656},{"normal":{"x":-0.73399651050567627,"y":0.0,"z":0.6791532039642334},"distance":433719.5}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.552369236946106,"y":0.0,"z":-0.83359956741333008},"distance":-506524.344},{"normal":{"x":0.83624356985092163,"y":0.0,"z":-0.54835820198059082},"distance":-373881.7},{"normal":{"x":-0.62806493043899536,"y":0.0,"z":0.77816092967987061},"distance":481169.063}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.64302080869674683,"y":0.0,"z":-0.76584875583648682},"distance":-475757.125},{"normal":{"x":0.98737728595733643,"y":0.0,"z":-0.15838563442230225},"distance":-176658.625},{"normal":{"x":-0.77265924215316772,"y":0.0,"z":0.63482099771499634},"distance":411823.4},{"normal":{"x":0.62806493043899536,"y":0.0,"z":-0.77816092967987061},"distance":-481169.063}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.24076355993747711,"y":0.0,"z":-0.97058379650115967},"distance":-540838.75},{"normal":{"x":0.93536913394927979,"y":0.0,"z":-0.35367298126220703},"distance":-279218.2},{"normal":{"x":-0.82086443901062012,"y":0.0,"z":0.57112300395965576},"distance":382940.844}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.63976508378982544,"y":0.0,"z":-0.76857054233551025},"distance":-469522.6},{"normal":{"x":0.73820221424102783,"y":0.0,"z":-0.67457950115203857},"distance":-430460.719},{"normal":{"x":0.99899154901504517,"y":0.0,"z":-0.04489796981215477},"distance":-130366.188},{"normal":{"x":0.74056029319763184,"y":0.0,"z":0.67198985815048218},"distance":268874.719},{"normal":{"x":-0.033195711672306061,"y":0.0,"z":0.999448835849762},"distance":519867.156},{"normal":{"x":-0.99699538946151733,"y":0.0,"z":-0.0774601474404335},"distance":57272.0}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.97396492958068848,"y":0.0,"z":-0.22669872641563416},"distance":-210783.0},{"normal":{"x":0.870022177696228,"y":0.0,"z":0.49301254749298096},"distance":168354.047},{"normal":{"x":-0.23745179176330566,"y":0.0,"z":0.97139936685562134},"distance":520159.4},{"normal":{"x":-0.91645336151123047,"y":0.0,"z":0.40014159679412842},"distance":292204.6},{"normal":{"x":-0.6961444616317749,"y":0.0,"z":-0.71790176630020142},"distance":-303610.625}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.23956693708896637,"y":0.0,"z":-0.970879852771759},"distance":-518838.1},{"normal":{"x":0.61964249610900879,"y":0.0,"z":-0.78488409519195557},"distance":-459574.9},{"normal":{"x":0.90481734275817871,"y":0.0,"z":0.42579987645149231},"distance":130278.734},{"normal":{"x":0.41667100787162781,"y":0.0,"z":0.9090573787689209},"distance":422015.5},{"normal":{"x":-0.94366735219955444,"y":0.0,"z":0.33089569211006165},"distance":256054.656}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.9862215518951416,"y":0.0,"z":0.16542960703372955},"distance":-7841.347},{"normal":{"x":0.59437710046768188,"y":0.0,"z":0.80418646335601807},"distance":347743.6},{"normal":{"x":-0.93448734283447266,"y":0.0,"z":-0.35599645972251892},"distance":-93183.03}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.91015017032623291,"y":0.0,"z":-0.414278507232666},"distance":-288518.781},{"normal":{"x":0.92033094167709351,"y":0.0,"z":0.3911406397819519},"distance":108365.094},{"normal":{"x":0.12627217173576355,"y":0.0,"z":0.991995632648468},"distance":476087.25},{"normal":{"x":-0.71034771203994751,"y":0.0,"z":0.70385086536407471},"distance":409397.3},{"normal":{"x":-0.70235466957092285,"y":0.0,"z":-0.71182715892791748},"distance":-291341.6}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.53862535953521729,"y":0.0,"z":0.84254539012908936},"distance":370120.938},{"normal":{"x":0.45223000645637512,"y":0.0,"z":0.89190131425857544},"distance":401740.156},{"normal":{"x":-0.2795332670211792,"y":0.0,"z":0.96013599634170532},"distance":495412.781},{"normal":{"x":-0.74583441019058228,"y":0.0,"z":0.66613137722015381},"distance":387728.438},{"normal":{"x":-0.77870726585388184,"y":0.0,"z":0.62738746404647827},"distance":370991.063},{"normal":{"x":-0.82721763849258423,"y":0.0,"z":-0.56188160181045532},"distance":-232888.3},{"normal":{"x":0.49777498841285706,"y":0.0,"z":-0.86730623245239258},"distance":-477060.063},{"normal":{"x":0.70235466957092285,"y":0.0,"z":0.71182715892791748},"distance":291341.6}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":-0.55567198991775513,"y":0.0,"z":0.83140164613723755},"distance":466764.156},{"normal":{"x":-0.78639280796051025,"y":0.0,"z":0.61772668361663818},"distance":367115.9},{"normal":{"x":-0.93358838558197021,"y":0.0,"z":0.35834705829620361},"distance":237993.8},{"normal":{"x":0.75960510969161987,"y":0.0,"z":-0.65038460493087769},"distance":-384006.3}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.00840302836149931,"y":0.0,"z":0.999964714050293},"distance":530906.938},{"normal":{"x":-0.11639045178890228,"y":0.0,"z":0.99320352077484131},"distance":533052.063},{"normal":{"x":-0.31166201829910278,"y":0.0,"z":0.95019304752349854},"distance":518408.531},{"normal":{"x":-0.71949547529220581,"y":0.0,"z":0.69449710845947266},"distance":397779.3},{"normal":{"x":-0.7970278263092041,"y":0.0,"z":0.60394257307052612},"distance":351205.438},{"normal":{"x":0.55118644237518311,"y":0.0,"z":-0.83438211679458618},"distance":-470650.9}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":-0.62662589550018311,"y":0.0,"z":0.779320240020752},"distance":442552.344},{"normal":{"x":-0.63910359144210815,"y":0.0,"z":0.76912063360214233},"distance":437063.938},{"normal":{"x":-0.90857589244842529,"y":0.0,"z":0.41771981120109558},"distance":238535.438},{"normal":{"x":-0.99934679269790649,"y":0.0,"z":0.036137986928224564},"distance":20339.8262},{"normal":{"x":0.68190473318099976,"y":0.0,"z":-0.73144102096557617},"distance":-423024.5},{"normal":{"x":-0.42202645540237427,"y":0.0,"z":0.90658348798751831},"distance":502615.281},{"normal":{"x":-0.55118644237518311,"y":0.0,"z":0.83438211679458618},"distance":470650.9}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.065956361591815948,"y":0.0,"z":0.99782252311706543},"distance":577662.7},{"normal":{"x":-0.73486799001693726,"y":0.0,"z":0.67821025848388672},"distance":388655.3},{"normal":{"x":-0.9416622519493103,"y":0.0,"z":0.33655929565429688},"distance":188950.766},{"normal":{"x":0.6902884840965271,"y":0.0,"z":-0.72353416681289673},"distance":-418442.438}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":-0.75665074586868286,"y":0.0,"z":0.65381920337677},"distance":376905.375},{"normal":{"x":-0.99621045589447021,"y":0.0,"z":0.08697538822889328},"distance":40218.43},{"normal":{"x":-0.81074213981628418,"y":0.0,"z":-0.58540338277816772},"distance":-356541.656},{"normal":{"x":0.72557169198989868,"y":0.0,"z":-0.68814659118652344},"distance":-402294.875},{"normal":{"x":-0.68190473318099976,"y":0.0,"z":0.73144102096557617},"distance":423024.5},{"normal":{"x":-0.6902884840965271,"y":0.0,"z":0.72353416681289673},"distance":418442.438}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":-0.91180247068405151,"y":0.0,"z":0.41062912344932556},"distance":236472.219},{"normal":{"x":-0.99549812078475952,"y":0.0,"z":-0.094781167805194855},"distance":-67909.75},{"normal":{"x":-0.93536543846130371,"y":0.0,"z":-0.35368260741233826},"distance":-223641.891},{"normal":{"x":0.98928475379943848,"y":0.0,"z":0.14599926769733429},"distance":97351.52}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":-0.99999421834945679,"y":0.0,"z":-0.0033885666634887457},"distance":-10411.6631},{"normal":{"x":-0.83133924007415771,"y":0.0,"z":-0.55576527118682861},"distance":-349140.2},{"normal":{"x":0.97611504793167114,"y":0.0,"z":0.21725408732891083},"distance":140725.4}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":-0.983153223991394,"y":0.0,"z":-0.18278348445892334},"distance":-119452.313},{"normal":{"x":-0.089668132364749908,"y":0.0,"z":-0.99597173929214478},"distance":-623729.063},{"normal":{"x":0.83185666799545288,"y":0.0,"z":-0.55499053001403809},"distance":-346885.844},{"normal":{"x":-0.21690700948238373,"y":0.0,"z":0.97619223594665527},"distance":602329.8}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.19306330382823944,"y":0.0,"z":-0.98118633031845093},"distance":-605254.6},{"normal":{"x":0.80244582891464233,"y":0.0,"z":-0.59672504663467407},"distance":-373798.7},{"normal":{"x":1.0,"y":0.0,"z":-1.0850694707187358E-06},"distance":-9195.59},{"normal":{"x":-0.75604790449142456,"y":0.0,"z":0.654516339302063},"distance":407680.781}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.12625376880168915,"y":0.0,"z":-0.99199795722961426},"distance":-607779.438},{"normal":{"x":0.63407784700393677,"y":0.0,"z":-0.77326923608779907},"distance":-481007.7},{"normal":{"x":0.92244350910186768,"y":0.0,"z":-0.38613221049308777},"distance":-249287.641},{"normal":{"x":-0.58398127555847168,"y":0.0,"z":0.81176716089248657},"distance":502265.2}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.43465453386306763,"y":0.0,"z":-0.90059727430343628},"distance":-552829.75},{"normal":{"x":0.57996892929077148,"y":0.0,"z":-0.814638614654541},"distance":-504476.219},{"normal":{"x":0.99991023540496826,"y":0.0,"z":-0.013397493399679661},"distance":-43340.9453},{"normal":{"x":-0.5842132568359375,"y":0.0,"z":0.8116002082824707},"distance":501707.6}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.37601694464683533,"y":0.0,"z":-0.92661279439926147},"distance":-562332.2},{"normal":{"x":0.62828189134597778,"y":0.0,"z":-0.77798581123352051},"distance":-485592.125},{"normal":{"x":0.72035503387451172,"y":0.0,"z":-0.69360542297363281},"distance":-440029.531},{"normal":{"x":-0.635021448135376,"y":0.0,"z":0.77249449491500854},"distance":480701.4}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.56254053115844727,"y":0.0,"z":-0.82676964998245239},"distance":-507911.375},{"normal":{"x":0.72070300579071045,"y":0.0,"z":-0.69324386119842529},"distance":-440565.375},{"normal":{"x":-0.67828094959259033,"y":0.0,"z":0.73480266332626343},"distance":461408.6}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.661591649055481,"y":0.0,"z":-0.74986428022384644},"distance":-468877.031},{"normal":{"x":0.73399651050567627,"y":0.0,"z":-0.6791532039642334},"distance":-433719.5},{"normal":{"x":0.77265924215316772,"y":0.0,"z":-0.63482099771499634},"distance":-411823.4},{"normal":{"x":-0.75672692060470581,"y":0.0,"z":0.653731107711792},"distance":420468.031}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.64947092533111572,"y":0.0,"z":-0.76038634777069092},"distance":-467606.75},{"normal":{"x":0.82086443901062012,"y":0.0,"z":-0.57112300395965576},"distance":-382940.844},{"normal":{"x":0.99699538946151733,"y":0.0,"z":0.0774601474404335},"distance":-57272.0},{"normal":{"x":0.43919128179550171,"y":0.0,"z":0.89839351177215576},"distance":421522.969},{"normal":{"x":-0.98614352941513062,"y":0.0,"z":0.16589437425136566},"distance":180564.891}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.94366735219955444,"y":0.0,"z":-0.33089569211006165},"distance":-256054.656},{"normal":{"x":0.92575132846832275,"y":0.0,"z":0.37813273072242737},"distance":105170.672},{"normal":{"x":-0.99388372898101807,"y":0.0,"z":0.11043152213096619},"distance":147853.438}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.95936346054077148,"y":0.0,"z":0.28217306733131409},"distance":54071.69},{"normal":{"x":-0.49777498841285706,"y":0.0,"z":0.86730623245239258},"distance":477060.063},{"normal":{"x":-0.93721723556518555,"y":0.0,"z":0.348746120929718},"distance":240661.2},{"normal":{"x":0.49306312203407288,"y":0.0,"z":-0.86999350786209106},"distance":-479009.4}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":-0.735098659992218,"y":0.0,"z":0.67796015739440918},"distance":396994.344},{"normal":{"x":-0.75960510969161987,"y":0.0,"z":0.65038460493087769},"distance":384006.3},{"normal":{"x":0.75150984525680542,"y":0.0,"z":-0.65972191095352173},"distance":-388544.9}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":-0.72557169198989868,"y":0.0,"z":0.68814659118652344},"distance":402294.875},{"normal":{"x":-0.99964410066604614,"y":0.0,"z":0.026676882058382034},"distance":5859.018},{"normal":{"x":-0.98928475379943848,"y":0.0,"z":-0.14599926769733429},"distance":-97351.52},{"normal":{"x":-0.97611504793167114,"y":0.0,"z":-0.21725408732891083},"distance":-140725.4},{"normal":{"x":0.21690700948238373,"y":0.0,"z":-0.97619223594665527},"distance":-602329.8},{"normal":{"x":0.75604790449142456,"y":0.0,"z":-0.654516339302063},"distance":-407680.781},{"normal":{"x":0.88900989294052124,"y":0.0,"z":-0.45788800716400146},"distance":-288517.281}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.58398127555847168,"y":0.0,"z":-0.81176716089248657},"distance":-502265.2},{"normal":{"x":0.70207273960113525,"y":0.0,"z":-0.71210527420043945},"distance":-443655.969},{"normal":{"x":-0.62002742290496826,"y":0.0,"z":0.78458023071289063},"distance":486011.8}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.46203392744064331,"y":0.0,"z":-0.88686221837997437},"distance":-541988.8},{"normal":{"x":0.635021448135376,"y":0.0,"z":-0.77249449491500854},"distance":-480701.4},{"normal":{"x":0.67828094959259033,"y":0.0,"z":-0.73480266332626343},"distance":-461408.6},{"normal":{"x":0.75672692060470581,"y":0.0,"z":-0.653731107711792},"distance":-420468.031},{"normal":{"x":0.98614352941513062,"y":0.0,"z":-0.16589437425136566},"distance":-180564.891},{"normal":{"x":0.6961444616317749,"y":0.0,"z":0.71790176630020142},"distance":303610.625},{"normal":{"x":-0.79948049783706665,"y":0.0,"z":0.6006920337677002},"distance":384326.469}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.99388372898101807,"y":0.0,"z":-0.11043152213096619},"distance":-147853.438},{"normal":{"x":0.93448734283447266,"y":0.0,"z":0.35599645972251892},"distance":93183.03},{"normal":{"x":-0.49306312203407288,"y":0.0,"z":0.86999350786209106},"distance":479009.4},{"normal":{"x":-0.795229434967041,"y":0.0,"z":0.60630863904953},"distance":363531.844},{"normal":{"x":0.22591507434844971,"y":0.0,"z":-0.97414696216583252},"distance":-519255.25}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":-0.75150984525680542,"y":0.0,"z":0.65972191095352173},"distance":388544.9},{"normal":{"x":-0.88900989294052124,"y":0.0,"z":0.45788800716400146},"distance":288517.281},{"normal":{"x":0.648945152759552,"y":0.0,"z":-0.76083517074584961},"distance":-471789.9},{"normal":{"x":0.75588029623031616,"y":0.0,"z":-0.65470981597900391},"distance":-407999.1},{"normal":{"x":0.7403227686882019,"y":0.0,"z":0.67225152254104614},"distance":275966.3},{"normal":{"x":-0.22591507434844971,"y":0.0,"z":0.97414696216583252},"distance":519255.25}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":0.5842132568359375,"y":0.0,"z":-0.8116002082824707},"distance":-501707.6},{"normal":{"x":0.79948049783706665,"y":0.0,"z":-0.6006920337677002},"distance":-384326.469},{"normal":{"x":-0.76634687185287476,"y":0.0,"z":0.64242702722549438},"distance":402668.4}]},{"name":"Albertine","clippingPlanes":[{"normal":{"x":-0.75588029623031616,"y":0.0,"z":0.65470981597900391},"distance":407999.1},{"normal":{"x":0.62002742290496826,"y":0.0,"z":-0.78458023071289063},"distance":-486011.8},{"normal":{"x":0.76634687185287476,"y":0.0,"z":-0.64242702722549438},"distance":-402668.4}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":0.99762922525405884,"y":0.0,"z":-0.068817943334579468},"distance":443510.375},{"normal":{"x":0.93305552005767822,"y":0.0,"z":0.35973227024078369},"distance":678610.6},{"normal":{"x":0.66415625810623169,"y":0.0,"z":0.74759376049041748},"distance":788389.2},{"normal":{"x":0.22890755534172058,"y":0.0,"z":0.97344821691513062},"distance":715031.3},{"normal":{"x":-0.767508327960968,"y":0.0,"z":-0.64103895425796509},"distance":-774395.563}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":0.7534334659576416,"y":0.0,"z":0.65752416849136353},"distance":777670.1},{"normal":{"x":0.58623409271240234,"y":0.0,"z":0.81014174222946167},"distance":788712.063},{"normal":{"x":-0.84061175584793091,"y":0.0,"z":-0.54163813591003418},"distance":-751666.6},{"normal":{"x":0.99645024538040161,"y":0.0,"z":0.084183283150196075},"distance":538439.9},{"normal":{"x":0.767508327960968,"y":0.0,"z":0.64103895425796509},"distance":774395.563}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":0.67906248569488525,"y":0.0,"z":0.73408049345016479},"distance":788603.2},{"normal":{"x":0.49305546283721924,"y":0.0,"z":0.86999791860580444},"distance":777401.9},{"normal":{"x":-0.077790811657905579,"y":0.0,"z":0.99696969985961914},"distance":564699.5},{"normal":{"x":-0.87906938791275024,"y":0.0,"z":0.47669380903244019},"distance":-158103.266},{"normal":{"x":-0.63196617364883423,"y":0.0,"z":-0.77499598264694214},"distance":-797547.438},{"normal":{"x":0.84061175584793091,"y":0.0,"z":0.54163813591003418},"distance":751666.6}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":-0.49268472194671631,"y":0.0,"z":0.87020790576934814},"distance":280372.8},{"normal":{"x":-0.99995803833007813,"y":0.0,"z":0.00915516633540392},"distance":-514565.625},{"normal":{"x":-0.8313896656036377,"y":0.0,"z":-0.55568987131118774},"distance":-781615.1},{"normal":{"x":-0.17966563999652863,"y":0.0,"z":-0.983727753162384},"distance":-716969.063},{"normal":{"x":0.99816292524337769,"y":0.0,"z":-0.060586333274841309},"distance":447049.781},{"normal":{"x":0.95389348268508911,"y":0.0,"z":0.30014541745185852},"distance":654205.75},{"normal":{"x":0.63196617364883423,"y":0.0,"z":0.77499598264694214},"distance":797547.438}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":-0.91917484998703,"y":0.0,"z":-0.39384967088699341},"distance":-724207.938},{"normal":{"x":-0.45613706111907959,"y":0.0,"z":-0.88990950584411621},"distance":-808800.063},{"normal":{"x":0.73998343944549561,"y":0.0,"z":-0.67262506484985352},"distance":-70275.875},{"normal":{"x":0.17966563999652863,"y":0.0,"z":0.983727753162384},"distance":716969.063}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":0.50185352563858032,"y":0.0,"z":0.86495262384414673},"distance":824322.0},{"normal":{"x":0.38184264302253723,"y":0.0,"z":0.92422735691070557},"distance":804407.1},{"normal":{"x":-0.67201083898544312,"y":0.0,"z":-0.740541398525238},"distance":-826169.063},{"normal":{"x":0.9858211874961853,"y":0.0,"z":0.16779935359954834},"distance":598137.063}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":-0.71100300550460815,"y":0.0,"z":0.70318889617919922},"distance":119390.344},{"normal":{"x":-0.64130228757858276,"y":0.0,"z":-0.76728838682174683},"distance":-829290.4},{"normal":{"x":0.66183358430862427,"y":0.0,"z":-0.749650776386261},"distance":-176014.672},{"normal":{"x":0.59469336271286011,"y":0.0,"z":0.80395257472991943},"distance":830426.938}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":-0.91856348514556885,"y":0.0,"z":-0.39527350664138794},"distance":-715540.8},{"normal":{"x":-0.09113013744354248,"y":0.0,"z":-0.99583899974823},"distance":-716687.4},{"normal":{"x":0.97952443361282349,"y":0.0,"z":0.20132522284984589},"distance":612972.9},{"normal":{"x":-0.08651106059551239,"y":0.0,"z":0.99625086784362793},"distance":626964.063}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":0.816588819026947,"y":0.0,"z":-0.57721984386444092},"distance":11703.0234},{"normal":{"x":0.99882817268371582,"y":0.0,"z":0.048396829515695572},"distance":515913.938},{"normal":{"x":-0.92127197980880737,"y":0.0,"z":0.388918936252594},"distance":-188858.156}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":0.97882324457168579,"y":0.0,"z":-0.20470702648162842},"distance":339418.938},{"normal":{"x":0.96407222747802734,"y":0.0,"z":0.26564010977745056},"distance":640489.8},{"normal":{"x":-0.992906391620636,"y":0.0,"z":-0.11889845132827759},"distance":-559282.8}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":0.99822646379470825,"y":0.0,"z":-0.059531744569540024},"distance":447170.375},{"normal":{"x":0.96803891658782959,"y":0.0,"z":0.25080007314682007},"distance":632085.4},{"normal":{"x":-0.99575608968734741,"y":0.0,"z":-0.092032089829444885},"distance":-543614.6}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":0.99656683206558228,"y":0.0,"z":-0.082791790366172791},"distance":431741.063},{"normal":{"x":0.97528988122940063,"y":0.0,"z":0.22092895209789276},"distance":616069.0},{"normal":{"x":-0.73998343944549561,"y":0.0,"z":0.67262506484985352},"distance":70275.875},{"normal":{"x":-0.83104074001312256,"y":0.0,"z":-0.55621159076690674},"distance":-777820.0},{"normal":{"x":0.90974372625350952,"y":0.0,"z":-0.415170282125473},"distance":176048.6}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":-0.9858211874961853,"y":0.0,"z":-0.16779935359954834},"distance":-598137.063},{"normal":{"x":-0.59469336271286011,"y":0.0,"z":-0.80395257472991943},"distance":-830426.938},{"normal":{"x":0.85669034719467163,"y":0.0,"z":0.515830934047699},"distance":766529.0}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":-0.80868172645568848,"y":0.0,"z":-0.58824652433395386},"distance":-791364.75},{"normal":{"x":0.08651106059551239,"y":0.0,"z":-0.99625086784362793},"distance":-626964.063},{"normal":{"x":0.99988752603530884,"y":0.0,"z":-0.014998313039541245},"distance":477605.2},{"normal":{"x":0.82939040660858154,"y":0.0,"z":0.55866950750350952},"distance":778625.0},{"normal":{"x":-0.98489278554916382,"y":0.0,"z":-0.1731652170419693},"distance":-601257.3},{"normal":{"x":-0.85669034719467163,"y":0.0,"z":-0.515830934047699},"distance":-766529.0}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":0.92127197980880737,"y":0.0,"z":-0.388918936252594},"distance":188858.156},{"normal":{"x":0.99999994039535522,"y":0.0,"z":-0.00027624308131635189},"distance":484262.156},{"normal":{"x":0.992906391620636,"y":0.0,"z":0.11889845132827759},"distance":559282.8},{"normal":{"x":0.98486918210983276,"y":0.0,"z":0.17329913377761841},"distance":590676.1},{"normal":{"x":-0.8832741379737854,"y":0.0,"z":0.46885684132575989},"distance":-127549.141},{"normal":{"x":-0.82939040660858154,"y":0.0,"z":-0.55866950750350952},"distance":-778625.0}]},{"name":"Lokkhone","clippingPlanes":[{"normal":{"x":0.99575608968734741,"y":0.0,"z":0.092032089829444885},"distance":543614.6},{"normal":{"x":-0.90974372625350952,"y":0.0,"z":0.415170282125473},"distance":-176048.6},{"normal":{"x":0.8832741379737854,"y":0.0,"z":-0.46885684132575989},"distance":127549.141}]}]}}],"cubes":[],"glTFObjects":[]}';

      Cesium.Ion.defaultAccessToken =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxZWU0YzIyZS1kZWIxLTQ2NTgtYmFlNi03ZGI5Mzc0ZGIyY2QiLCJpZCI6Nzk3NzYsImlhdCI6MTY4NzQyOTc0MH0.67UiVUYxM9NjTR3N85Sp0gIXu02MvQCiMpY_4aHxV48";
      //const viewer = new Cesium.Viewer("cesiumContainer");

      //useEffect(() => {
      //  (async () => {
      const sceneData = JSON.parse(json);

      const projectVersionData = {
        name: "dsf",
        changeLog: "dsfdsf",
        projectId: 23,
        sceneData: json,
      };

      //console.log("df");

      /*     const dsf = "{ \"globeAncor\":{\"position\":{\"x\":5440217.7643018421,\"y\":3309980.0012347731,\"z\":-378398.82843382133},\"orientation\":{\"x\":0.87132769823074341,\"y\":-0.48979157209396362,\"z\":-0.014637780375778675,\"w\":0.026039017364382744},\"scale\":{\"x\":1.0000047683836073,\"y\":1.0000000000005183,\"z\":1.0000000000005187}},\"clippingPlaneCollections\":[{\"name\":\"ClippingPolygon\",\"clippingPlanes\":[{\"normal\":{\"x\":0.910433292388916,\"y\":0.0,\"z\":0.4136558473110199},\"distance\":-115834.75},{\"normal\":{\"x\":-0.28150114417076111,\"y\":0.0,\"z\":0.95956093072891235},\"distance\":-536682.8},{\"normal\":{\"x\":-0.42849305272102356,\"y\":0.0,\"z\":-0.90354514122009277},\"distance\":426407.8}]},{\"name\":\"ClippingPolygon\",\"clippingPlanes\":[{\"normal\":{\"x\":0.95692610740661621,\"y\":0.0,\"z\":0.29033151268959045},\"distance\":-43764.43},{\"normal\":{\"x\":0.80095809698104858,\"y\":0.0,\"z"}";*/

      const tilesets = sceneData.tilesets;
      const terrainTileset = sceneData.tilesets[0];
      const clipping = terrainTileset.clipping;

      //const projectVersion = new ProjectVersionDto(projectVersionData);
      const viewer = new Cesium.Viewer("cesiumContainer");

      const multiClippingPlaneCollection = new Cesium.MultiClippingPlaneCollection(
        {
          modelMatrix: toMatrix4(clipping.globeAncor),
          collections: clipping.clippingPlaneCollections.map((cpc) =>
            toCesiumClippingPlaneCollection({
              modelMatrix: Cesium.Matrix4.IDENTITY,
              clippingPlanes: cpc.clippingPlanes,
            })
          ),
        }
      );

      //viewer.scene.globe.multiClippingPlanes = multiClippingPlaneCollection;

      const optimizedClippingCollection = new Cesium.OptimizedClippingCollection(
        {
          modelMatrix: toMatrix4(clipping.globeAncor),
          collections: clipping.clippingPlaneCollections.map((cpc) =>
            toCesiumClippingPlaneCollection({
              modelMatrix: Cesium.Matrix4.IDENTITY,
              clippingPlanes: cpc.clippingPlanes,
            })
          ),
        }
      );

      viewer.scene.globe.optimizedClippingPlanes = optimizedClippingCollection;
      console.log("df");

      flyTo(viewer, sceneData.camera);

      //const createdViewer =

      //projectVersion
      //  .createViewerAsync({ domContainer: "cesiumContainer" })
      //  .then((createdViewer) => projectVersion.addToAsync(createdViewer).then());

      /*   await projectVersion.addToAsync(createdViewer);*/
      //  })();
      //});

      function flyTo(viewer, { name, firstPosition, firstRotation }) {
        viewer.camera.flyTo({
          destination: toCartesian3(firstPosition),
          orientation: {
            pitch: Cesium.Math.toRadians(-firstRotation.x),
            heading: Cesium.Math.toRadians(firstRotation.y),
            roll: Cesium.Math.toRadians(firstRotation.z),
          },
          easingFunction: Cesium.EasingFunction.QUADRATIC_IN_OUT,
        });
      }

      function toCesiumClippingPlaneCollection({
        modelMatrix,
        clippingPlanes,
      }) {
        const collection = new Cesium.ClippingPlaneCollection({
          modelMatrix,
          planes: clippingPlanes.map((cp) => toClippingPlane(cp)),
        });

        return collection;
      }

      function toClippingPlane({ normal, distance }) {
        return new Cesium.ClippingPlane(toCartesian3(normal), distance);
      }

      function toCartesian3({ x, y, z }) {
        return new Cesium.Cartesian3(x, y, z);
      }

      function toQuaternion({ x, y, z, w }) {
        return new Cesium.Quaternion(x, y, z, w);
      }

      function toMatrix4({ position, orientation, scale }) {
        const matrix4 = Cesium.Matrix4.fromTranslationQuaternionRotationScale(
          toCartesian3(position),
          toQuaternion(orientation),
          toCartesian3(scale)
        );

        return matrix4;
      }

      class CameraDto {
        constructor({ name, firstPosition, firstRotation }) {
          this.name = name;
          this.firstPosition = new Vector3Dto(firstPosition);
          this.firstRotation = new Vector3Dto(firstRotation);
        }

        addTo(viewer) {
          viewer.camera.flyTo({
            destination: this.firstPosition,
            orientation: {
              pitch: Cesium.Math.toRadians(-this.firstRotation.x),
              heading: Cesium.Math.toRadians(this.firstRotation.y),
              roll: Cesium.Math.toRadians(this.firstRotation.z),
            },
            easingFunction: Cesium.EasingFunction.QUADRATIC_IN_OUT,
          });
        }
      }

      class ClippingDto {
        constructor({ name, globeAncor, clippingPlaneCollections }) {
          this.name = name;
          this.globeAncor = new GlobeAncorDto(globeAncor);

          this.clippingPlaneCollections = clippingPlaneCollections.map(
            (cpc) => new ClippingPlaneCollectionDto(cpc)
          );
        }

        toCesiumMultiClippingPlaneCollection() {
          const multiClippingPlaneCollection = new Cesium.MultiClippingPlaneCollection(
            {
              modelMatrix: this.globeAncor.toMatrix4(),
              collections: this.clippingPlaneCollections.map((cpc) =>
                cpc.toCesiumClippingPlaneCollection({
                  modelMatrix: Cesium.Matrix4.IDENTITY,
                })
              ),
            }
          );

          return multiClippingPlaneCollection;
        }

        toCesiumClippingPlaneCollection() {
          const collection = this.clippingPlaneCollections[0].toCesiumClippingPlaneCollection(
            {
              modelMatrix: this.globeAncor.toMatrix4(),
            }
          );

          return collection;
        }
      }

      class ClippingPlaneCollectionDto {
        constructor({ name, clippingPlanes }) {
          this.name = name;
          this.clippingPlanes = clippingPlanes.map(
            (cp) => new ClippingPlaneDto(cp)
          );
        }

        toCesiumClippingPlaneCollection({ modelMatrix }) {
          const collection = new Cesium.ClippingPlaneCollection({
            modelMatrix,
            planes: this.clippingPlanes,
          });

          return collection;
        }
      }

      class ClippingPlaneDto extends Cesium.ClippingPlane {
        constructor({ normal, distance }) {
          super(new Vector3Dto(normal), distance);
        }
      }

      class ColorDto extends Cesium.Color {
        constructor({ r, g, b, a }) {
          super(r, g, b, a);
        }
      }

      class CubeDto {
        constructor({ name, globeAncor, material }) {
          this.name = name;
          this.globeAncor = new GlobeAncorDto(globeAncor);
          this.material = new MaterialDto(material);
        }

        addTo(viewer) {
          viewer.entities.add(this.toEntity());
        }

        toEntity() {
          const entity = new Cesium.Entity({
            name: this.name,
            box: {
              dimensions: this.globeAncor.scale,
              material: new Cesium.ColorMaterialProperty(
                this.material.mainColorRGBA
              ),
            },
            position: this.globeAncor.position,
            orientation: this.globeAncor.orientation,
          });

          return entity;
        }
      }

      class DirectionalLightDto {
        constructor({ name, direction, colorRGBA, intensity }) {
          this.name = name;
          this.direction = new Vector3Dto(direction);
          this.colorRGBA = new ColorDto(colorRGBA);
          this.intensity = intensity;
        }

        addTo(viewer) {
          const light = new Cesium.DirectionalLight({
            direction: this.direction,
            //direction: Cesium.Cartesian3.normalize(new Cesium.Cartesian3(-1, 1, 1), new Cesium.Cartesian3()),
            color: this.colorRGBA,
            intensity: 3 * this.intensity,
          });
          viewer.scene.light = light;
        }
      }

      class GlobeAncorDto {
        constructor({ position, orientation, scale }) {
          this.position = new Vector3Dto(position);
          this.orientation = new QuaternionDto(orientation);
          this.scale = new Vector3Dto(scale);
        }

        toMatrix4() {
          const matrix4 = Cesium.Matrix4.fromTranslationQuaternionRotationScale(
            this.position,
            this.orientation,
            this.scale
          );

          return matrix4;
        }
      }

      class GlTFObjectDto {
        constructor({ name, globeAncor, ionAssetId }) {
          this.name = name;
          this.globeAncor = new GlobeAncorDto(globeAncor);
          this.ionAssetId = ionAssetId;
        }

        static #uriByAssetId = new Map();

        async #getUriAsync() {
          let uri = GlTFObjectDto.#uriByAssetId.get(this.ionAssetId);

          if (uri == null) {
            uri = await Cesium.IonResource.fromAssetId(this.ionAssetId);
            console.log("uri " + uri);
            GlTFObjectDto.#uriByAssetId.set(this.ionAssetId, uri);
          }

          return uri;
        }

        async addToAsync(viewer) {
          viewer.entities.add(await this.toEntityAsync());
        }

        async toEntityAsync() {
          const uri = await this.#getUriAsync();

          const entity = new Cesium.Entity({
            name: this.name,
            model: {
              uri: uri,
              scale: this.globeAncor.scale.y,
            },
            position: this.globeAncor.position,
            orientation: this.globeAncor.orientation,
          });

          return entity;
        }
      }

      class MaterialDto {
        constructor({ name, mainColorRGBA }) {
          this.name = name;
          this.mainColorRGBA = new ColorDto(mainColorRGBA);
        }
      }

      class PolylineArrowRendererDto extends PolylineRendererDto {
        constructor({ color }) {
          super(color);
        }

        toColorMaterialProperty() {
          const materialProperty = new Cesium.PolylineArrowMaterialProperty(
            this.color
          );

          return materialProperty;
        }
      }

      class PolylineDashRendererDto extends PolylineRendererDto {
        constructor({ color, gapColor, dashLength }) {
          super(color);

          this.gapColor = gapColor != null ? new ColorDto(gapColor) : null;

          this.dashLength = dashLength;
        }

        toColorMaterialProperty() {
          const materialProperty = new Cesium.PolylineDashMaterialProperty({
            color: this.color,
            gapColor: this.gapColor,
            dashLength: this.dashLength,
          });

          return materialProperty;
        }
      }

      class PolylineDto {
        constructor({
          name,
          vertexPositions,
          isClampToGround,
          width,
          type,
          renderer,
        }) {
          this.name = name;
          this.vertexPositions = vertexPositions.map(
            (vp) => new Vector3Dto(vp)
          );
          this.isClampToGround = isClampToGround;
          this.width = width;
          this.type = type;

          let polylineRenderer;

          switch (type) {
            case "Dash":
              polylineRenderer = new PolylineDashRendererDto(renderer);
              break;
            case "Outline":
              polylineRenderer = new PolylineOutlineRendererDto(renderer);
              break;
            case "Glow":
              polylineRenderer = new PolylineGlowRendererDto(renderer);
              break;
            case "Arrow":
              polylineRenderer = new PolylineArrowRendererDto(renderer);
              break;
            default:
              polylineRenderer = new PolylineStandardRendererDto(renderer);
          }

          this.renderer = polylineRenderer;
        }

        addTo(viewer) {
          viewer.entities.add(this.toEntity());
        }

        toEntity() {
          const entity = new Cesium.Entity({
            name: this.name,
            polyline: {
              positions: this.vertexPositions,
              clampToGround: this.isClampToGround,
              width: this.width,
              material: this.renderer.toColorMaterialProperty(),
            },
          });

          return entity;
        }
      }

      class PolylineGlowRendererDto extends PolylineRendererDto {
        constructor({ color, glowPower, taperPower }) {
          super(color);
          this.glowPower = glowPower;
          this.taperPower = taperPower;
        }

        toColorMaterialProperty() {
          const materialProperty = new Cesium.PolylineGlowMaterialProperty({
            color: this.color,
            glowPower: this.glowPower,
            taperPower: this.taperPower,
          });

          return materialProperty;
        }
      }

      class PolylineOutlineRendererDto extends PolylineRendererDto {
        constructor({ color, outlineColor, outlineWidth }) {
          super(color);

          this.outlineColor =
            outlineColor != null ? new ColorDto(outlineColor) : null;

          this.outlineWidth = outlineWidth;
        }

        toColorMaterialProperty() {
          const materialProperty = new Cesium.PolylineOutlineMaterialProperty({
            color: this.color,
            outlineColor: this.outlineColor,
            outlineWidth: this.outlineWidth,
          });

          return materialProperty;
        }
      }

      class PolylineRendererDto {
        constructor(color) {
          this.color = color != null ? new ColorDto(color) : null;
        }
      }

      class PolylineStandardRendererDto extends PolylineRendererDto {
        constructor({ color }) {
          super(color);
        }

        toColorMaterialProperty() {
          const materialProperty = new Cesium.ColorMaterialProperty(this.color);

          return materialProperty;
        }
      }

      class ProjectVersionDto {
        constructor({ name, changeLog, projectId, sceneData }) {
          this.name = name;
          this.changeLog = changeLog;
          this.projectId = projectId;
          this.sceneData = new SceneDataDto(JSON.parse(sceneData));
        }

        async addMissingToAsync(viewer, { existedAssets }) {
          await this.sceneData.addCompetitiveObjectsToAsync(viewer, {
            existedAssets,
          });
          await this.sceneData.addNotCompetitiveObjectsToAsync(viewer);
        }

        async addToAsync(viewer) {
          await this.sceneData.addCompetitiveObjectsToAsync(viewer, {
            existedAssets: [],
          });
          await this.sceneData.addNotCompetitiveObjectsToAsync(viewer);
          this.sceneData.addOnlySoloModeObjectsTo(viewer);
        }

        createEntities() {
          return this.sceneData.createEntities();
        }

        async createViewerAsync({ domContainer }) {
          const viewer = await this.sceneData.createViewerAsync({
            domContainer,
          });

          return viewer;
        }
      }

      class QuaternionDto extends Cesium.Quaternion {
        constructor({ x, y, z, w }) {
          super(x, y, z, w);
        }
      }

      class RasterOverlayDto {
        constructor({ ionAssetId }) {
          this.ionAssetId = ionAssetId;
        }

        toImageryLayer() {
          if (this.ionAssetId == null || this.ionAssetId === 0) {
            return null;
          }

          //const imageryProvider = await IonImageryProvider.fromAssetId(this.ionAssetId);
          //var imageryLayer = new ImageryLayer(imageryProvider);

          const imageryProvider = Cesium.IonImageryProvider.fromAssetId(
            this.ionAssetId
          );
          const imageryLayer = Cesium.ImageryLayer.fromProviderAsync(
            imageryProvider
          );

          return imageryLayer;
        }
      }

      class SceneDataDto {
        constructor({
          camera,
          directionalLight,
          tilesets,
          cubes,
          glTFObjects,
          polylines,
        }) {
          this.camera = new CameraDto(camera);

          this.directionalLight =
            directionalLight == null
              ? null
              : new DirectionalLightDto(directionalLight);

          this.tilesets = tilesets.map((t) => new TilesetDto(t));
          this.cubes = cubes.map((c) => new CubeDto(c));
          this.glTFObjects = glTFObjects.map((g) => new GlTFObjectDto(g));
          this.polylines = polylines.map((pl) => new PolylineDto(pl));
        }

        async addCompetitiveObjectsToAsync(viewer, { existedAssets }) {
          const existedAssetIds = existedAssets?.map((a) => a.assetId) ?? [];

          if (
            typeof viewer.scene.globe !== "undefined" &&
            viewer.scene.globe?.multiClippingPlanes == null
          ) {
            const terrainTilesetDto = this.tilesets[0];
            const multiClippingCollection = terrainTilesetDto.clipping?.toCesiumMultiClippingPlaneCollection();
            viewer.scene.globe.multiClippingPlanes = multiClippingCollection;
          }

          await Promise.all(
            this.tilesets
              .filter((t) => !existedAssetIds.includes(t.ionAssetId))
              .filter((_, index) => index !== 0)
              .map((t) => t.addToAsync(viewer))
          );
        }

        async addNotCompetitiveObjectsToAsync(viewer) {
          for (const glTFObject of this.glTFObjects) {
            await glTFObject.addToAsync(viewer);
          }

          this.tilesets[0]?.rasterOverlays.forEach((ro, index) => {
            if (index !== 0) {
              const imageryLayer = ro.toImageryLayer();
              viewer.imageryLayers.add(imageryLayer);
            }
          });

          this.cubes.forEach((c) => c.addTo(viewer));
          this.polylines.forEach((pl) => pl.addTo(viewer));
        }

        addOnlySoloModeObjectsTo(viewer) {
          this.camera?.addTo(viewer);
          //this.directionalLight?.addTo(viewer);

          viewer.scene.debugShowFramesPerSecond = true;
        }

        async createViewerAsync({ domContainer }) {
          const terrainTilesetDto = this.tilesets[0];
          const terrainProvider = await terrainTilesetDto.getTerrainProviderAsync();

          const mapProjection = new Cesium.GeographicProjection();

          let baseLayer, globe;

          if (terrainProvider != null) {
            baseLayer = terrainTilesetDto?.rasterOverlays[0]?.toImageryLayer();
            globe = new Cesium.Globe(mapProjection.ellipsoid);
          } else {
            baseLayer = false;
            globe = false;
          }

          const viewer = new Cesium.Viewer(domContainer, {
            baseLayer,
            baseLayerPicker: false,
            timeline: false,
            animation: false,
            homeButton: false,
            sceneModePicker: false,
            infoBox: false,
            navigationHelpButton: false,
            geocoder: false,
            mapProjection,
            globe,
          });

          if (terrainProvider != null) {
            viewer.terrainProvider = terrainProvider;
            viewer.shadows = true;
            viewer.terrainShadows = true;
            viewer.scene.globe.shadows = Cesium.ShadowMode.RECEIVE_ONLY;
            viewer.scene.globe.depthTestAgainstTerrain = true;
          } else {
            const scene = viewer.scene;
            scene.requestRenderMode = true;
            scene.maximumRenderTimeChange = Infinity;

            const cameraController = scene.screenSpaceCameraController;
            cameraController.enableLook = false;
            cameraController.inertiaSpin = 0.05;
            cameraController.inertiaTranslate = 0;
            cameraController.inertiaZoom = 0.05;
            cameraController.maximumMovementRatio = 0.01;
            cameraController.minimumCollisionTerrainHeight = 150000000;
            cameraController.minimumPickingTerrainDistanceWithInertia = 4000;
            cameraController.minimumPickingTerrainHeight = 150000;
            cameraController.minimumTrackBallHeight = 7500000;
          }

          return viewer;
        }
      }

      class TilesetDto {
        constructor({
          name,
          tilesetSourceKind,
          url,
          ionAssetId,
          clipping,
          rasterOverlays,
        }) {
          this.name = name;
          this.tilesetSourceKind = tilesetSourceKind;
          this.url = url;
          this.ionAssetId = ionAssetId;
          this.clipping = clipping == null ? null : new ClippingDto(clipping);
          this.rasterOverlays = rasterOverlays.map(
            (ro) => new RasterOverlayDto(ro)
          );
        }

        async addToAsync(viewer) {
          let tileset;

          if (this.ionAssetId != null && this.ionAssetId !== 0) {
            tileset = await Cesium.Cesium3DTileset.fromIonAssetId(
              this.ionAssetId
            );
          } else if (this.url != null && this.url !== "") {
            tileset = await Cesium.Cesium3DTileset.fromUrl(this.url, {
              dynamicScreenSpaceError: true,
              dynamicScreenSpaceErrorDensity: 0.00278,
              dynamicScreenSpaceErrorFactor: 4.0,
              dynamicScreenSpaceErrorHeightFalloff: 0.25,
              showCreditsOnScreen: true,
            });
          } else {
            return;
          }

          tileset.clippingPlanes = this.clipping?.toCesiumClippingPlaneCollection();
          viewer.scene.primitives.add(tileset);
        }

        async getTerrainProviderAsync() {
          const terrainProviderOptions = {
            requestWaterMask: true,
            requestVertexNormals: true,
          };

          if (this.ionAssetId != null && this.ionAssetId !== 0) {
            return await Cesium.CesiumTerrainProvider.fromIonAssetId(
              this.ionAssetId,
              terrainProviderOptions
            );
          } else if (this.url != null && this.url !== "") {
            return await Cesium.CesiumTerrainProvider.fromUrl(
              this.url,
              terrainProviderOptions
            );
          }

          return null;
        }
      }

      class Vector3Dto extends Cesium.Cartesian3 {
        constructor({ x, y, z }) {
          super(x, y, z);
        }
      }
    </script>
  </body>
</html>
